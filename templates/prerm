#!/bin/bash
# This file was autogenerated by node-deb {{ node_deb_version }}
set -e
set -o pipefail

declare -r init_type='{{ node_deb_init }}'
declare -r service_name='{{ node_deb_package_name }}'

if hash service 2> /dev/null; then
  if [[ "$init_type" == 'auto' || "$init_type" == 'upstart' ]]; then
    service "$service_name" stop || echo "$service_name wasn't even running!"
  fi
elif hash stop 2> /dev/null; then
  if [[ "$init_type" == 'auto' || "$init_type" == 'upstart' ]]; then
    stop "$service_name" || echo "$service_name wasn't even running!"
  fi
elif hash systemctl 2> /dev/null; then
  if [[ "$init_type" == 'auto' || "$init_type" == 'systemd' ]]; then
    systemctl disable "$service_name.service" || echo "$service_name wasn't even running!"
  elif [[ "$init_type" == 'auto' || "$init_type" == 'systemd_socket' ]]; then
    systemctl disable "$service_name.socket" || echo "$service_name.socket wasn't even running!"
    systemctl disable "$service_name.service" || echo "$service_name.service wasn't even running!"
  fi
else
  # using echo because if we've reached here, most likely we never started
  echo "Your system does not appear to use upstart or systemd, so $service_name could not be stopped"
  echo 'Unless these systems were removed since install, no processes have been left running'
fi
